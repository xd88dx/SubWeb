(()=>{"use strict";const e=[{label:"myurls-cf",value:"https://url.ziz.dpdns.org/short"},{label:"shlink-self",value:"https://url.933993.xyz:1443/rest/v3/short-urls"}],l=[{label:"Clash",value:"clash"},{label:"Clash新参数",value:"clash&new_name=true"},{label:"ClashR",value:"clashr"},{label:"ClashR新参数",value:"clashr&new_name=true"},{label:"混合订阅（mixed）",value:"mixed"},{label:"Sing-Box",value:"singbox"},{label:"Surge2",value:"surge&ver=2"},{label:"Surge3",value:"surge&ver=3"},{label:"Surge4",value:"surge&ver=4"},{label:"Quantumult",value:"quan"},{label:"QuantumultX",value:"quanx"},{label:"Surfboard",value:"surfboard"},{label:"V2Ray",value:"v2ray"},{label:"SS",value:"ss"},{label:"SSR",value:"ssr"},{label:"SSD",value:"ssd"},{label:"SSAndroid",value:"sssub"},{label:"Loon",value:"loon"}],n=[{label:"subapi.cmliussss.net(CM提供-负载均衡后端)",value:"https://subapi.cmliussss.net/sub?"},{label:"v.id9.cc(品云提供-稳定后端)",value:"https://v.id9.cc/sub?"},{label:"url.v1.mk(肥羊提供-增强型后端)",value:"https://url.v1.mk/sub?"},{label:"sub.d1.mk(肥羊提供-备用后端)",value:"https://sub.d1.mk/sub?"},{label:"localhost:25500(自建本地服务)",value:"http://localhost:25500/sub?"},{label:"asdlokj1qpi233(tindy2013-增强版)",value:"https://sub.933993.xyz:1443/sub?"}],i=[{label:"定制规则",options:[{label:"CM_Online_MultiCountry 同步定制 精简",value:"https://raw.githubusercontent.com/xd88dx/ACL4SSR/main/ACL4SSR_Online_MultiCountry_mini.ini"},{label:"CM_Online_MultiCountry 同步定制 全显",value:"https://raw.githubusercontent.com/xd88dx/ACL4SSR/main/ACL4SSR_Online_MultiCountry_full.ini"}]},{label:"CM规则",options:[{label:"CM_Online 默认版 识别港美地区(与Github同步)",value:"https://raw.githubusercontent.com/cmliu/ACL4SSR/main/Clash/config/ACL4SSR_Online.ini"},{label:"CM_Online_MultiCountry 识别港美地区 负载均衡(与Github同步)",value:"https://raw.githubusercontent.com/cmliu/ACL4SSR/main/Clash/config/ACL4SSR_Online_MultiCountry.ini"},{label:"CM_Online_MultiCountry_CF 识别港美地区、CloudFlareCDN 负载均衡 Worker节点专用(与Github同步)",value:"https://raw.githubusercontent.com/cmliu/ACL4SSR/main/Clash/config/ACL4SSR_Online_MultiCountry_CF.ini"},{label:"CM_Online_Full 识别多地区分组(与Github同步)",value:"https://raw.githubusercontent.com/cmliu/ACL4SSR/main/Clash/config/ACL4SSR_Online_Full.ini"},{label:"CM_Online_Full_CF 识别多地区、CloudFlareCDN 分组 Worker节点专用(与Github同步)",value:"https://raw.githubusercontent.com/cmliu/ACL4SSR/main/Clash/config/ACL4SSR_Online_Full_CF.ini"},{label:"CM_Online_Full_MultiMode 识别多地区 负载均衡(与Github同步)",value:"https://raw.githubusercontent.com/cmliu/ACL4SSR/main/Clash/config/ACL4SSR_Online_Full_MultiMode.ini"},{label:"CM_Online_Full_MultiMode_CF 识别多地区、CloudFlareCDN 负载均衡 Worker节点专用(与Github同步)",value:"https://raw.githubusercontent.com/cmliu/ACL4SSR/main/Clash/config/ACL4SSR_Online_Full_MultiMode_CF.ini"}]},{label:"ACL4SSR",options:[{label:"ACL4SSR_Online 默认版 分组比较全(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online.ini"},{label:"ACL4SSR_Online_AdblockPlus 更多去广告(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_AdblockPlus.ini"},{label:"ACL4SSR_Online_MultiCountry 多国分组(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_MultiCountry.ini"},{label:"ACL4SSR_Online_NoAuto 无自动测速(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_NoAuto.ini"},{label:"ACL4SSR_Online_NoReject 无广告拦截规则(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_NoReject.ini"},{label:"ACL4SSR_Online_Mini 精简版(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini.ini"},{label:"ACL4SSR_Online_Mini_AdblockPlus.ini 精简版 更多去广告(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_AdblockPlus.ini"},{label:"ACL4SSR_Online_Mini_NoAuto.ini 精简版 不带自动测速(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_NoAuto.ini"},{label:"ACL4SSR_Online_Mini_Fallback.ini 精简版 带故障转移(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_Fallback.ini"},{label:"ACL4SSR_Online_Mini_MultiMode.ini 精简版 自动测速、故障转移、负载均衡(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_MultiMode.ini"},{label:"ACL4SSR_Online_Mini_MultiCountry.ini 精简版 带港美日国家(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_MultiCountry.ini"},{label:"ACL4SSR_Online_Full 全分组 重度用户使用(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full.ini"},{label:"ACL4SSR_Online_Full_MultiMode.ini 全分组 多模式 重度用户使用(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_MultiMode.ini"},{label:"ACL4SSR_Online_Full_NoAuto.ini 全分组 无自动测速 重度用户使用(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_NoAuto.ini"},{label:"ACL4SSR_Online_Full_AdblockPlus 全分组 重度用户使用 更多去广告(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_AdblockPlus.ini"},{label:"ACL4SSR_Online_Full_Netflix 全分组 重度用户使用 奈飞全量(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_Netflix.ini"},{label:"ACL4SSR_Online_Full_Google 全分组 重度用户使用 谷歌细分(与Github同步)",value:"https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_Google.ini"},{label:"ACL4SSR 本地 默认版 分组比较全",value:"config/ACL4SSR.ini"},{label:"ACL4SSR_Mini 本地 精简版",value:"config/ACL4SSR_Mini.ini"},{label:"ACL4SSR_Mini_NoAuto.ini 本地 精简版+无自动测速",value:"config/ACL4SSR_Mini_NoAuto.ini"},{label:"ACL4SSR_Mini_Fallback.ini 本地 精简版+fallback",value:"config/ACL4SSR_Mini_Fallback.ini"},{label:"ACL4SSR_BackCN 本地 回国",value:"config/ACL4SSR_BackCN.ini"},{label:"ACL4SSR_NoApple 本地 无苹果分流",value:"config/ACL4SSR_NoApple.ini"},{label:"ACL4SSR_NoAuto 本地 无自动测速 ",value:"config/ACL4SSR_NoAuto.ini"},{label:"ACL4SSR_NoAuto_NoApple 本地 无自动测速&无苹果分流",value:"config/ACL4SSR_NoAuto_NoApple.ini"},{label:"ACL4SSR_NoMicrosoft 本地 无微软分流",value:"config/ACL4SSR_NoMicrosoft.ini"},{label:"ACL4SSR_WithGFW 本地 GFW列表",value:"config/ACL4SSR_WithGFW.ini"}]},{label:"universal",options:[{label:"No-Urltest",value:"https://cdn.jsdelivr.net/gh/SleepyHeeead/subconverter-config@master/remote-config/universal/no-urltest.ini"},{label:"Urltest",value:"https://cdn.jsdelivr.net/gh/SleepyHeeead/subconverter-config@master/remote-config/universal/urltest.ini"}]},{label:"customized",options:[{label:"Nirvana",value:"https://raw.githubusercontent.com/Mazetsz/ACL4SSR/master/Clash/config/V2rayPro.ini"},{label:"V2Pro",value:"https://raw.githubusercontent.com/Mazeorz/airports/master/Clash/V2Pro.ini"},{label:"史迪仔-自动测速",value:"https://raw.githubusercontent.com/Mazeorz/airports/master/Clash/Stitch.ini"},{label:"史迪仔-负载均衡",value:"https://raw.githubusercontent.com/Mazeorz/airports/master/Clash/Stitch-Balance.ini"},{label:"Maying",value:"https://cdn.jsdelivr.net/gh/SleepyHeeead/subconverter-config@master/remote-config/customized/maying.ini"},{label:"Ytoo",value:"https://cdn.jsdelivr.net/gh/SleepyHeeead/subconverter-config@master/remote-config/customized/ytoo.ini"},{label:"FlowerCloud",value:"https://cdn.jsdelivr.net/gh/SleepyHeeead/subconverter-config@master/remote-config/customized/flowercloud.ini"},{label:"NyanCAT",value:"https://cdn.jsdelivr.net/gh/SleepyHeeead/subconverter-config@master/remote-config/customized/nyancat.ini"},{label:"Nexitally",value:"https://cdn.jsdelivr.net/gh/SleepyHeeead/subconverter-config@master/remote-config/customized/nexitally.ini"},{label:"SoCloud",value:"https://cdn.jsdelivr.net/gh/SleepyHeeead/subconverter-config@master/remote-config/customized/socloud.ini"},{label:"ARK",value:"https://cdn.jsdelivr.net/gh/SleepyHeeead/subconverter-config@master/remote-config/customized/ark.ini"},{label:"ssrCloud",value:"https://cdn.jsdelivr.net/gh/SleepyHeeead/subconverter-config@master/remote-config/customized/ssrcloud.ini"}]},{label:"Special",options:[{label:"NeteaseUnblock(仅规则，No-Urltest)",value:"https://cdn.jsdelivr.net/gh/SleepyHeeead/subconverter-config@master/remote-config/special/netease.ini"},{label:"Basic(仅GEOIP CN + Final)",value:"https://cdn.jsdelivr.net/gh/SleepyHeeead/subconverter-config@master/remote-config/special/basic.ini"}]}];var t=function(e,l,n,i){return new(n||(n=Promise))((function(t,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function u(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var l;e.done?t(e.value):(l=e.value,l instanceof n?l:new n((function(e){e(l)}))).then(o,u)}s((i=i.apply(e,l||[])).next())}))};let a="";function o(e){const l=e.backend;let n=e.url;n=encodeURIComponent(n.replace(/(\n|\r|\n\r)/g,"|"));let i=`${l}&url=${n}&target=${e.target}`;var t;e.config&&(i+=`&config=${encodeURIComponent(e.config)}`),e.include&&(i+=`&include=${encodeURIComponent(e.include)}`),e.exclude&&(i+=`&wxclude=${encodeURIComponent(e.exclude)}`),e.name&&(i+=`&filename=${encodeURIComponent(e.name)}`),i+=`&emoji=${e.emoji||"false"}&append_type=${e.append_type||"false"}&append_info=${e.append_info||"false"}&scv=${e.scv||"false"}&udp=${e.udp||"false"}&list=${e.list||"false"}&sort=${e.sort||"false"}&fdn=${e.fdn||"false"}&insert=${e.insert||"false"}`,a=i,$("#result").val(a),t=a,navigator.clipboard.writeText(t).then((()=>{layui.layer.msg("复制成功~",{icon:1})}),(()=>{layui.layer.msg("复制失败, 请手动选择复制",{icon:2})}))}layui.use(["form"],(()=>{const u=layui.form;let s="";l.forEach((e=>{s+=`<option value="${e.value}">${e.label}</option>`})),$("#targetSelecter").append(s),s="",i.forEach((e=>{let l="";e.options.forEach((e=>{l+=`<option value="${e.value}">${e.label}</option>`})),s+=`<optgroup label="${e.label}">${l}</optgroup>`})),$("#configSelecter").append(s),s="",n.forEach((e=>{s+=`<option value="${e.value}">${e.label}</option>`})),$("#backendSelecter").append(s),s="",e.forEach((e=>{s+=`<option value="${e.value}">${e.label}</option>`})),$("#shorturlSelecter").append(s),u.render("select","optionsForm"),u.on("submit(generate)",(e=>{o(e.field)})),$("#generateShort").on("click",(()=>t(void 0,void 0,void 0,(function*(){if(!a)return layui.layer.msg("未生成新的订阅链接",{icon:2});const e=$("#shorturlSelecter option:selected"),l=e.val(),n=e.text().toLowerCase();if(!l||""===l)return layui.layer.msg("未选择短链配置",{icon:2});try{let e;if(n.includes("myurls")){const n={longUrl:btoa(a),shortKey:""},i=yield fetch(l,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams(n).toString()});e=yield i.json(),$("#result-short").val(e.ShortUrl)}else{if(!n.includes("shlink"))return layui.layer.msg("不支持的短链配置类型",{icon:2});{const n=$("#shortkeyText").val();if(!n||""===n)return layui.layer.msg("未填写短链密钥",{icon:2});const i=yield fetch(l,{method:"POST",headers:{"Content-Type":"application/json","X-Api-Key":n},body:JSON.stringify({longUrl:a,findIfExists:!0})});e=yield i.json(),$("#result-short").val(e.shortUrl)}}a="",$("#result").val(a)}catch(e){layui.layer.msg("短链生成失败："+e,{icon:2})}})))),$("#importToClash").on("click",(()=>{if(!a)return layui.layer.msg("未生成新的订阅链接",{icon:2});const e=`clash://install-config?url=${encodeURIComponent(a)}`;window.open(e)}))}))})();